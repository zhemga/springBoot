(window.webpackJsonpreactjs=window.webpackJsonpreactjs||[]).push([[0],{109:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),o=a.n(l),s=(a(82),a(24)),c=a(25),i=a(32),u=a(31),m=a(112),d=a(113),h=a(74),E=a(115),p=a(14),g=a(9),f=a(118),b=a(116),v=a(21),w=a.n(v),y=function(){return{type:"USER_REQUEST"}},k=function(){return{type:"USER_SUCCESS"}},S=function(e){return{type:"USER_FAILURE",payload:e}},C=function(e){return{type:"SUCCESS",payload:e}},U=function(){return{type:"FAILURE",payload:!1}},x=a(27),j=Object(x.b)((function(e){return{auth:e.auth}}),(function(e){return{logoutUser:function(){return e((function(e){e({type:"LOGOUT_REQUEST"}),localStorage.removeItem("jwtToken"),e(C(!1))}))}}}))((function(e){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:"ml-auto"},r.a.createElement(p.b,{to:"/register",className:"text-warning nav-link"},"Register"),r.a.createElement(p.b,{to:"/login",className:"text-warning nav-link"},"Login"))),a=r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null,r.a.createElement(p.b,{to:"/animalList",className:"text-danger nav-link"},"Animal List")),r.a.createElement(b.a,null,r.a.createElement(p.b,{to:"/userList",className:"text-danger nav-link"},"User List")),r.a.createElement(b.a,{className:"navbar-right"},r.a.createElement(p.b,{to:"/logout",className:"nav-link",onClick:function(){e.logoutUser()}},"Logout")));return r.a.createElement(f.a,{bg:"dark",expand:"lg",variant:"dark"},r.a.createElement(m.a,null,r.a.createElement(f.a.Brand,null,r.a.createElement(p.b,{class:"navbar-brand",to:"/"},"Animal Hotel")),r.a.createElement(f.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(f.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(b.a,{className:"me-auto"},r.a.createElement(b.a.Link,null,r.a.createElement(p.b,{class:"nav-link",to:"/"},"Home")),r.a.createElement(b.a.Link,null,r.a.createElement(p.b,{class:"nav-link",to:"/about/"},"About Hotel")),r.a.createElement(b.a.Link,null,r.a.createElement(p.b,{class:"nav-link text-warning",to:"/files"},"Files Up/Download"))),e.auth.isLoggedIn?a:t)))})),L=(a(106),a(8)),O=a(120),F=a(119),N=a(117),R=a(121),T=a(75),I=a(114),A=a(18),z=a(19),_=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).initialState={username:"",password:"",error:""},n.credentialChange=function(e){n.setState(Object(L.a)({},e.target.name,e.target.value))},n.validateUser=function(){n.props.authenticateUser(n.state.username,n.state.password);var e=new WebSocket("ws://127.0.0.1:4444");e.onopen=function(){console.log("Connected!"),e.send("Ping")},setTimeout((function(){n.props.auth.isLoggedIn?n.props.history.push("/home"):(n.resetLoginForm(),n.setState({error:"Invalid login and password"}))}),2500)},n.resetLoginForm=function(){n.setState((function(){return n.initialState}))},n.state=n.initialState,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.error;return r.a.createElement(d.a,{className:"justify-content-md-center"},r.a.createElement(h.a,{xs:5},this.props.message&&r.a.createElement(O.a,{variant:"success"},this.props.message),n&&r.a.createElement(O.a,{variant:"danger"},n),r.a.createElement(F.a,{className:"border border-dark bg-dark text-white"},r.a.createElement(F.a.Header,null,r.a.createElement(A.a,{icon:z.b})," Login"),r.a.createElement(F.a.Body,null,r.a.createElement(N.a.Group,{as:h.a},r.a.createElement(R.a,null,r.a.createElement(R.a.Text,null,r.a.createElement(A.a,{icon:z.d})),r.a.createElement(T.a,{required:!0,autoComplete:"off",type:"text",name:"username",value:t,onChange:this.credentialChange,className:"bg-dark text-white",placeholder:"Enter Login"}))),r.a.createElement(N.a.Group,{className:"mt-3",as:h.a},r.a.createElement(R.a,null,r.a.createElement(R.a.Text,null,r.a.createElement(A.a,{icon:z.a})),r.a.createElement(T.a,{required:!0,autoComplete:"off",type:"password",name:"password",value:a,onChange:this.credentialChange,className:"bg-dark text-white",placeholder:"Enter Password"})))),r.a.createElement(F.a.Footer,{style:{textAlign:"right"}},r.a.createElement(I.a,{size:"sm",type:"button",variant:"success",onClick:this.validateUser,disabled:0===this.state.username.length||this.state.password.length<6},r.a.createElement(A.a,{icon:z.b})," Login")," ",r.a.createElement(I.a,{size:"sm",type:"button",variant:"info",onClick:this.resetLoginForm},r.a.createElement(A.a,{icon:z.c})," Reset")))))}}]),a}(n.Component),G=Object(x.b)((function(e){return{auth:e.auth}}),(function(e){return{authenticateUser:function(t,a){return e(function(e,t){var a={username:e,password:t};return function(e){e({type:"LOGIN_REQUEST"}),w.a.post("http://localhost:8080/api/public/login",a).then((function(t){var a=t.headers.authorization;localStorage.setItem("jwtToken",a),e(C({username:t.data.username,isLoggedIn:!0}))})).catch((function(t){e(U())}))}}(t,a))}}}))(_),H=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).initialState={username:"",password:"",passwordConfirm:"",error:""},n.credentialChange=function(e){n.setState(Object(L.a)({},e.target.name,e.target.value))},n.validateUser=function(){n.props.registerUser(n.state.username,n.state.password,n.state.passwordConfirm),setTimeout((function(){n.props.user.isRegistered?n.props.history.push("/login"):(n.resetLoginForm(),n.setState({error:n.props.error}))}),2500)},n.resetLoginForm=function(){n.setState((function(){return n.initialState}))},n.state=n.initialState,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.passwordConfirm,l=e.error;return r.a.createElement(d.a,{className:"justify-content-md-center"},r.a.createElement(h.a,{xs:5},this.props.message&&r.a.createElement(O.a,{variant:"success"},this.props.message),l&&r.a.createElement(O.a,{variant:"danger"},l),r.a.createElement(F.a,{className:"border border-dark bg-dark text-white"},r.a.createElement(F.a.Header,null,r.a.createElement(A.a,{icon:z.b})," Register"),r.a.createElement(F.a.Body,null,r.a.createElement(N.a.Group,{as:h.a},r.a.createElement(R.a,null,r.a.createElement(R.a.Text,null,r.a.createElement(A.a,{icon:z.d})),r.a.createElement(T.a,{required:!0,autoComplete:"off",type:"text",name:"username",value:t,onChange:this.credentialChange,className:"bg-dark text-white",placeholder:"Enter Login"}))),r.a.createElement(N.a.Group,{className:"mt-3",as:h.a},r.a.createElement(R.a,null,r.a.createElement(R.a.Text,null,r.a.createElement(A.a,{icon:z.a})),r.a.createElement(T.a,{required:!0,autoComplete:"off",type:"password",name:"password",value:a,onChange:this.credentialChange,className:"bg-dark text-white",placeholder:"Enter Password"}))),r.a.createElement(N.a.Group,{className:"mt-3",as:h.a},r.a.createElement(R.a,null,r.a.createElement(R.a.Text,null,r.a.createElement(A.a,{icon:z.a})),r.a.createElement(T.a,{required:!0,autoComplete:"off",type:"password",name:"passwordConfirm",value:n,onChange:this.credentialChange,className:"bg-dark text-white",placeholder:"Confirm Password"})))),r.a.createElement(F.a.Footer,{style:{textAlign:"right"}},r.a.createElement(I.a,{size:"sm",type:"button",variant:"success",onClick:this.validateUser,disabled:0===this.state.username.length||this.state.password.length<6||this.state.passwordConfirm.length<6||this.state.password!=this.state.passwordConfirm},r.a.createElement(A.a,{icon:z.b})," Register")," ",r.a.createElement(I.a,{size:"sm",type:"button",variant:"info",onClick:this.resetLoginForm},r.a.createElement(A.a,{icon:z.c})," Reset")))))}}]),a}(n.Component),B=Object(x.b)((function(e){return{user:e.user}}),(function(e){return{registerUser:function(t,a,n){return e(function(e,t,a){return function(n){var r={username:e,password:t,passwordConfirm:a};n(y()),w.a.post("http://localhost:8080/api/public/register",r).then((function(e){n(k())})).catch((function(e){n(S(e.message))}))}}(t,a,n))}}}))(H),Q=function(e){e?w.a.defaults.headers.common.Authorization="".concat(e):delete w.a.defaults.headers.common.Authorization},q=Object(x.b)((function(e){return{auth:e.auth}}))((function(e){return localStorage.jwtToken&&Q(localStorage.jwtToken),r.a.createElement(O.a,{style:{backgroundColor:"#343A40",color:"#ffffff80"}},"Welcome, ",e.auth.username,".")})),P=a(39),W=w.a.create({baseURL:"http://localhost:8080",headers:{"Content-type":"application/json"}}),D=new(function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"upload",value:function(e,t){var a=new FormData;return a.append("file",e),W.post("/api/upload",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}},{key:"getFiles",value:function(){return W.get("/api/files")}}]),e}()),J=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).selectFile=n.selectFile.bind(Object(P.a)(n)),n.upload=n.upload.bind(Object(P.a)(n)),n.state={selectedFiles:void 0,currentFile:void 0,progress:0,message:"",fileInfos:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;D.getFiles().then((function(t){e.setState({fileInfos:t.data})}))}},{key:"selectFile",value:function(e){this.setState({selectedFiles:e.target.files})}},{key:"upload",value:function(){var e=this,t=this.state.selectedFiles[0];this.setState({progress:0,currentFile:t}),D.upload(t,(function(t){e.setState({progress:Math.round(100*t.loaded/t.total)})})).then((function(t){return e.setState({message:t.data.message}),D.getFiles()})).then((function(t){e.setState({fileInfos:t.data})})).catch((function(){e.setState({progress:0,message:"Could not upload the file!",currentFile:void 0})})),this.setState({selectedFiles:void 0})}},{key:"render",value:function(){var e=this.state,t=e.selectedFiles,a=e.fileInfos;return r.a.createElement("center",null,r.a.createElement("h1",{class:"mb-3 text-light"},"Files Upload"),r.a.createElement("label",{className:"btn btn-default text-light"},r.a.createElement("input",{type:"file",onChange:this.selectFile})),r.a.createElement("button",{className:"btn btn-warning",disabled:!t,onClick:this.upload},"Upload"),r.a.createElement("h1",{class:"mt-5 mb-3 text-light"},"Files List"),r.a.createElement(E.a,{striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Type"),r.a.createElement("th",null,"Size"))),r.a.createElement("tbody",null,a&&a.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,t),r.a.createElement("td",null,r.a.createElement("a",{href:e.fileDownloadUri},e.fileName)),r.a.createElement("td",null,e.fileType),r.a.createElement("td",null,e.size," mb"))})))))}}]),a}(n.Component),M=function(e){return r.a.createElement(F.a,{bg:"dark",text:"light"},r.a.createElement(F.a.Header,null,"Welcome to our Animal Hotel!"),r.a.createElement("center",null,r.a.createElement("img",{class:"w-75 rounded m-4",src:"https://i.pinimg.com/originals/33/c6/f2/33c6f29e8a03b5cd8cf68e4435986195.jpg"})))},$=(a(109),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={data:[],oldUrl:""},n.getRows=function(e){return n.state.oldUrl!=e&&w.a.get(e,{headers:{Authorization:"Bearer "+localStorage.getItem("jwtToken")}}).then((function(t){n.setState((function(){return{data:t.data,oldUrl:e}}))})).catch((function(e){})),n.state.data.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.id),r.a.createElement("td",null,null!=e.name?e.name:e.username))}))},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(p.a,null,r.a.createElement(j,null),r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(h.a,{lg:12,className:"mt-5"},r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/",exact:!0,component:M}),r.a.createElement(g.b,{path:"/animalList",exact:!0,render:function(){return r.a.createElement("center",null,r.a.createElement("h1",{class:"mt-2 text-light"},"Animals"),r.a.createElement("hr",null),r.a.createElement(E.a,{striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"))),r.a.createElement("tbody",null,e.getRows("http://localhost:8080/api/animals"))))}}),r.a.createElement(g.b,{path:"/userList",exact:!0,render:function(){return r.a.createElement("center",null,r.a.createElement("h1",{class:"mt-2 text-light"},"Users"),r.a.createElement("hr",null),r.a.createElement(E.a,{striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"))),r.a.createElement("tbody",null,e.getRows("http://localhost:8080/api/users"))))}}),r.a.createElement(g.b,{path:"/home",exact:!0,component:q}),r.a.createElement(g.b,{path:"/register",exact:!0,component:B}),r.a.createElement(g.b,{path:"/login",exact:!0,component:G}),r.a.createElement(g.b,{path:"/files",exact:!0,component:J}),r.a.createElement(g.b,{exact:!0,path:"/about",render:function(){return r.a.createElement("center",null,r.a.createElement("h1",{class:"mt-5 text-light"},"About Hotel: tel: 9379992"))}}),r.a.createElement(g.b,{path:"/logout",exact:!0,render:function(){return r.a.createElement("center",null,r.a.createElement("h2",{class:"mt-5 text-light"},"User loged out successfully!"))}}),r.a.createElement(g.b,{path:"*",exact:!0},r.a.createElement(g.a,{to:"/"})))))))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=a(42),V=a(76),X=a(1),Y={isRegistered:!1,error:""},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REQUEST":return Object(X.a)({},e);case"USER_SUCCESS":return{error:"",isRegistered:!0};case"USER_FAILURE":return{error:t.payload};default:return e}},ee={username:"",isLoggedIn:""},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":case"LOGOUT_REQUEST":return Object(X.a)({},e);case"SUCCESS":case"FAILURE":return{username:t.payload.username,isLoggedIn:t.payload.isLoggedIn};default:return e}},ae=Object(K.b)({user:Z,auth:te}),ne=Object(K.c)(ae,Object(K.a)(V.a));o.a.render(r.a.createElement(x.a,{store:ne},r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},77:function(e,t,a){e.exports=a(110)},82:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.f22f632c.chunk.js.map